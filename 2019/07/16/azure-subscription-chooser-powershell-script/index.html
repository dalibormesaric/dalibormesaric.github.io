<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Azure Subscription Chooser PowerShell Script | Developer&#39;s Challenges</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="If you want to execute a PowerShell scripts that does something in Azure, you might want to start your script with making sure the right subscription is chosen.">
<meta name="keywords" content="azure,powershell,script">
<meta property="og:type" content="article">
<meta property="og:title" content="Azure Subscription Chooser PowerShell Script">
<meta property="og:url" content="https://developerschallenges.com/2019/07/16/azure-subscription-chooser-powershell-script/index.html">
<meta property="og:site_name" content="Developer&#39;s Challenges">
<meta property="og:description" content="If you want to execute a PowerShell scripts that does something in Azure, you might want to start your script with making sure the right subscription is chosen.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://developerschallenges.com/images/posts/2019-07-16-azure-subscription-chooser-powershell-script/hero.png">
<meta property="og:updated_time" content="2019-10-27T17:17:51.695Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Azure Subscription Chooser PowerShell Script">
<meta name="twitter:description" content="If you want to execute a PowerShell scripts that does something in Azure, you might want to start your script with making sure the right subscription is chosen.">
<meta name="twitter:image" content="https://developerschallenges.com/images/posts/2019-07-16-azure-subscription-chooser-powershell-script/hero.png">
  
  
    <link rel="icon" href="/favicon.ico">
	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#3b8dbd">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="application-name" content="Azure Subscription Chooser PowerShell Script | Developer&#39;s Challenges">
  <meta name="msapplication-square70x70logo" content="/ms-icon-70x70.png">
  <meta name="msapplication-square150x150logo" content="/ms-icon-150x150.png">
  <meta name="msapplication-square310x310logo" content="/ms-icon-310x310.png">
  <meta name="msapplication-notification" content="frequency=30;polling-uri=http://notifications.buildmypinnedsite.com/?feed=https://developerschallenges.com/atom.xml&amp;id=1;polling-uri2=http://notifications.buildmypinnedsite.com/?feed=https://developerschallenges.com/atom.xml&amp;id=2;polling-uri3=http://notifications.buildmypinnedsite.com/?feed=https://developerschallenges.com/atom.xml&amp;id=3;polling-uri4=http://notifications.buildmypinnedsite.com/?feed=https://developerschallenges.com/atom.xml&amp;id=4;polling-uri5=http://notifications.buildmypinnedsite.com/?feed=https://developerschallenges.com/atom.xml&amp;id=5; cycle=1">
	<meta name="theme-color" content="#3b8dbd">
  

  <link rel="stylesheet" href="/css/style.css">
  
  
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50403505-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



  

  
    <link href="//fonts.googleapis.com/css?family=Titillium+Web:300,400,600" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

</head>
</html>
<body>
  <div id="wrap">
    <header id="header">
  <div id="header-outer" class="outer">
    <div class="container">
      <div class="container-inner">
        <div id="header-title">
          <h1 class="logo-wrap">
            <a href="/">Developer&#39;s Challenges</a>
          </h1>
          
        </div>
        <div id="header-inner" class="nav-container">
          <a id="main-nav-toggle" class="nav-icon"></a>
          <div class="nav-container-inner">
            <ul id="main-nav">
              
                <li class="main-nav-list-item" ><a class="main-nav-list-link" href="/">Blog</a></li>
              
                <li class="main-nav-list-item" ><a class="main-nav-list-link" href="/projects">Projects</a></li>
              
                <li class="main-nav-list-item" ><a class="main-nav-list-link" href="/about">About</a></li>
              
            </ul>
            <nav id="sub-nav">
              <div id="search-form-wrap">
                <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://developerschallenges.com"></form>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
    <div class="container">
      <div class="main-body container-inner">
        <div class="main-body-inner">
          <section id="main">
            <div class="main-body-content">
              
  <article id="post-2019-07-16-azure-subscription-chooser-powershell-script" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
      <!--  -->
      
        <header class="article-header">
          
  
    <h1 class="article-title" itemprop="name">
      Azure Subscription Chooser PowerShell Script
    </h1>
  

        </header>
      
	  
      <p class="article-byline">
        <a href="/2019/07/16/azure-subscription-chooser-powershell-script/" class="article-date">
  <time datetime="2019-07-15T22:00:00.000Z" itemprop="datePublished">2019-07-16</time>
</a>
      </p>
	  
      <div class="article-entry" itemprop="articleBody">
        <p><img src="/images/posts/2019-07-16-azure-subscription-chooser-powershell-script/hero.png"></p>
<p>If you want to execute a PowerShell scripts that does something in Azure, you might want to start your script with making sure the right subscription is chosen.<br><a id="more"></a></p>
<hr>
<p>I had a task to automate creation of Azure resources required for an application that we were building. I used a combination of ARM Templates and Azure PowerShell to create the resources, but I had to make sure that whoever would run the script had an option of choosing whichever subscription they wanted. This way it was easy to package up the application, and just have single script that will set up required cloud resources.</p>
<p>If you are just starting with Azure, you probably have only one tenant and only one Pay-As-You-Go subscription. But if you are a regular Azure user, you might have your MSDN subscription, your company’s subscription, plus any other subscriptions attached to one or more of your customers.</p>
<script src="https://gist.github.com/dalibormesaric/2d9014ff3eba0b7261a557d7a1ff23ac.js"></script>

<p>While creating this script I found an interesting behavior in the <code>Connect-AzAccount</code> step. You might not be offered subscriptions from the account you signed in with. This script fixes that, and details are linked in commented out code.</p>

      </div>
      <footer class="article-footer">
        <a data-url="https://developerschallenges.com/2019/07/16/azure-subscription-chooser-powershell-script/" data-id="ck299i3j4000pf8srezcoicyh" class="article-share-link">Share</a>
        
          <a href="https://developerschallenges.com/2019/07/16/azure-subscription-chooser-powershell-script/#comments" class="article-comment-link">Comments</a>
        
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/azure/">azure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/script/">script</a></li></ul>

      </footer>
    </div>
  </article>
  
    <section id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </section>
  

            </div>
          </section>
          <aside id="sidebar">
  <div class="sidebar-top">
    <p>social</p>
    <ul class="social-links">
      
        <li><a class="social-tooltip" title="Twitter" href="https://twitter.com/dalibormesaric"><i id="icon-Twitter" class="icon"></i></a></li>
      
        <li><a class="social-tooltip" title="LinkedIn" href="https://linkedin.com/in/dalibormesaric"><i id="icon-LinkedIn" class="icon"></i></a></li>
      
        <li><a class="social-tooltip" title="Gist" href="https://gist.github.com/dalibormesaric"><i id="icon-Gist" class="icon"></i></a></li>
      
        <li><a class="social-tooltip" title="GitHub" href="https://github.com/dalibormesaric"><i id="icon-GitHub" class="icon"></i></a></li>
      
        <li><a class="social-tooltip" title="RSS" href="/atom.xml"><i id="icon-RSS" class="icon"></i></a></li>
      
    </ul>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/02/11/ndc-london-2018-recap/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <p class="article-nav-title">NDC London 2018 Recap</p>
      <i class="icon" id="icon-chevron-left"></i>
    </a>
  
  
</nav>

  
  <div class="widgets-container">
    
      
  <div class="widget-wrap">
    <h3 class="widget-title">recent articles</h3>
    <div class="widget">
      <ul id="recent-post">
        
          <li>
            <div class="item-thumbnail">
              <a href="/2019/07/16/azure-subscription-chooser-powershell-script/" class="thumbnail">
  
    <span style="background-image:url(/images/posts/2019-07-16-azure-subscription-chooser-powershell-script/hero.png
)" title="Azure Subscription Chooser PowerShell Script" class="thumbnail-image"></span>
  

</a>
            </div>
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2019/07/16/azure-subscription-chooser-powershell-script/" class="title">Azure Subscription Chooser PowerShell Script</a></p>
              <p class="item-date"><time datetime="2019-07-15T22:00:00.000Z" itemprop="datePublished">2019-07-16</time></p>
            </div>
          </li>
        
          <li>
            <div class="item-thumbnail">
              <a href="/2018/02/11/ndc-london-2018-recap/" class="thumbnail">
  
    <span style="background-image:url(/images/posts/2018-02-11-ndc-london-2018-recap/hero.png
)" title="NDC London 2018 Recap" class="thumbnail-image"></span>
  

</a>
            </div>
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2018/02/11/ndc-london-2018-recap/" class="title">NDC London 2018 Recap</a></p>
              <p class="item-date"><time datetime="2018-02-10T23:00:00.000Z" itemprop="datePublished">2018-02-11</time></p>
            </div>
          </li>
        
          <li>
            <div class="item-thumbnail">
              <a href="/2018/01/22/passing-microsoft-exam-70-483/" class="thumbnail">
  
    <span style="background-image:url(/images/posts/2018-01-22-passing-microsoft-exam-70-483/hero.png
)" title="Passing Microsoft Exam 70-483" class="thumbnail-image"></span>
  

</a>
            </div>
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2018/01/22/passing-microsoft-exam-70-483/" class="title">Passing Microsoft Exam 70-483</a></p>
              <p class="item-date"><time datetime="2018-01-21T23:00:00.000Z" itemprop="datePublished">2018-01-22</time></p>
            </div>
          </li>
        
          <li>
            <div class="item-thumbnail">
              <a href="/2017/12/30/episerver-how-to-set-a-value-on-the-server-side-and-update-the-all-properties-view/" class="thumbnail">
  
    <span style="background-image:url(/images/posts/2017-12-30-how-to-set-a-value-on-the-server-side-and-update-the-all-properties-view/hero.png
)" title="Episerver: How to set a value on the server side and update the All Properties View?" class="thumbnail-image"></span>
  

</a>
            </div>
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2017/12/30/episerver-how-to-set-a-value-on-the-server-side-and-update-the-all-properties-view/" class="title">Episerver: How to set a value on the server side and update the All Properties View?</a></p>
              <p class="item-date"><time datetime="2017-12-29T23:00:00.000Z" itemprop="datePublished">2017-12-30</time></p>
            </div>
          </li>
        
          <li>
            <div class="item-thumbnail">
              <a href="/2017/11/30/stop-looking-at-ads-with-pi-hole/" class="thumbnail">
  
    <span style="background-image:url(/images/posts/2017-11-30-stop-looking-at-ads-with-pi-hole/pi-hole.png
)" title="Stop looking at ads with Pi-hole" class="thumbnail-image"></span>
  

</a>
            </div>
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/2017/11/30/stop-looking-at-ads-with-pi-hole/" class="title">Stop looking at ads with Pi-hole</a></p>
              <p class="item-date"><time datetime="2017-11-29T23:00:00.000Z" itemprop="datePublished">2017-11-30</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

    
        <div class="widget-wrap widget-list">
    <h3 class="widget-title">other articles</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://monox.mono-software.com/blog/post/Mono/227/Azure-Mobile-Services-tips-and-tricks/">Azure Mobile Services tips and tricks</a>
          </li>
        
          <li>
            <a href="http://monox.mono-software.com/blog/post/Mono/226/Adding-ASP-NET-SimpleMembership-to-an-existing-MVC-4-application/">Adding ASP.NET SimpleMembership to an existing MVC 4 application</a>
          </li>
        
          <li>
            <a href="http://monox.mono-software.com/blog/post/Mono/215/WebCamp-Zagreb-Lessons-Learned/">WebCamp Zagreb - Lessons Learned</a>
          </li>
        
          <li>
            <a href="http://monox.mono-software.com/blog/post/Mono/192/TicTacToe-3D-game-in-WebGL-Part-I/">TicTacToe 3D game in WebGL - Part I</a>
          </li>
        
          <li>
            <a href="http://monox.mono-software.com/blog/post/Mono/175/Using-XML-data-in-Windows-Phone-apps/">Using XML data in Windows Phone apps</a>
          </li>
        
      </ul>
    </div>
  </div>

    
  </div>
</aside>
        </div>
      </div>
    </div>
    <footer id="footer">
  
  <div class="container">
    <div class="container-inner">
      <div class="credit">
        <p class="logo-wrap">
          <a href="/">Developer&#39;s Challenges</a>
        </p>
        <p>&copy; 2019 Dalibor Mesarić</p>
        <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a></p>
      </div>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'developerschallenges';
  
  var disqus_url = 'https://developerschallenges.com/2019/07/16/azure-subscription-chooser-powershell-script/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>






<script src="/js/html-patch.js"></script>
<script src="/js/script.js"></script>

  </div>
</body>
</html>
